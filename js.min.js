var html_editor=ace.edit("html_editor"),css_editor=ace.edit("css_editor"),js_editor=ace.edit("js_editor");html_editor.session.setMode("ace/mode/html"),css_editor.session.setMode("ace/mode/css"),js_editor.session.setMode("ace/mode/javascript"),html_editor.setShowPrintMargin(!1),css_editor.setShowPrintMargin(!1),js_editor.setShowPrintMargin(!1),html_editor.setOptions({enableBasicAutocompletion:!0}),css_editor.setOptions({enableBasicAutocompletion:!0}),js_editor.setOptions({enableBasicAutocompletion:!0}),html_editor.commands.on("afterExec",eventData=>{"insertstring"===eventData.command.name&&preview_canvas()}),css_editor.commands.on("afterExec",eventData=>{"insertstring"===eventData.command.name&&preview_canvas()}),js_editor.commands.on("afterExec",eventData=>{"insertstring"===eventData.command.name&&preview_canvas()});var frame=document.getElementById("preview").contentWindow.document,iFrame=document.getElementById("preview");function preview_canvas(){var css_code="<style>"+css_editor.getValue()+"</style>",js_code="<script>"+js_editor.getValue()+"<\/script>";frame.write(html_editor.getValue()+css_code+js_code),frame.close(),iFrame.style.width=iFrame.contentWindow.document.body.scrollWidth+"px",iFrame.style.height=iFrame.contentWindow.document.body.scrollHeight+"px"}frame.open();var node=document.getElementById("preview").contentWindow.document.body;function convert_to_image(){var parent=document.getElementsByClassName("result")[0],node=document.getElementById("preview").contentWindow.document.body,canvas=document.createElement("canvas");canvas.width=node.scrollWidth,canvas.height=node.scrollHeight,domtoimage.toPng(node).then((function(pngDataUrl){var img=new Image;img.onload=function(){var context;if(canvas.getContext("2d").drawImage(img,0,0),window.navigator.msSaveBlob)window.navigator.msSaveBlob(canvas.msToBlob(),"download.png");else{const a=document.createElement("a");a.href=canvas.toDataURL(),a.download="download.png",a.click()}},img.src=pngDataUrl}))}document.getElementsByClassName("download")[0].addEventListener("click",()=>{convert_to_image()});
